#       nodes     msg (B)     ops         min         avg         p50         p90         p99   Throughput (Gbps)
#--------------------------------------------------------------------------------------------
           20        1000     100       63.69      263.97       67.51     1684.35     1740.74                2.37
           20        2000     100       71.35       73.86       73.59       76.20       78.17                4.35
           20        3000     100       73.46       77.23       76.86       79.56       95.08                6.24
           20        4000     100       64.55       69.37       68.39       72.15       89.93                9.36
           20        5000     100       68.74       71.85       71.46       74.66       79.39               11.19
           20        6000     100       71.47       75.35       74.62       78.40      101.04               12.87
           20        7000     100       75.20       78.39       78.12       80.64       85.98               14.34
           20        8000     100       85.55       95.61       93.79      106.20      116.26               13.65
           20        9000     100       89.53       99.12       97.55      110.72      119.19               14.76
           20       10000     100       93.26      101.53       99.74      110.59      119.54               16.04
           20       11000     100       99.23      109.08      107.43      119.65      136.98               16.38
           20       12000     100      101.36      110.25      108.91      118.94      141.55               17.63
           20       13000     100      104.44      115.28      113.74      125.89      141.59               18.29
           20       14000     100      106.86      116.97      114.60      127.82      143.38               19.55
           20       15000     100      110.66      120.72      118.53      131.17      146.77               20.25
           20       20000     100      112.60      130.61      127.23      149.30      171.77               25.15
           20       25000     100      126.02      142.67      138.74      162.84      185.93               28.83
           20       30000     100      132.41      151.99      148.33      172.74      181.97               32.36
           20       35000     100      147.19      163.26      160.72      175.40      227.59               34.84
           20       40000     100      160.44      180.46      176.29      201.66      225.89               36.30
           20       45000     100      213.67      261.70      227.24      260.98     3253.24               31.68
           20       50000     100      241.65      294.69      260.57      283.40     3275.92               30.70
           20       55000     100      262.34      327.63      281.52      315.84     3375.26               31.26
           20       60000     100      256.54      285.94      284.20      311.67      339.46               33.78

           40        1000     100      127.17      517.02      132.57     1742.16     1775.85                2.41
           40        2000     100      137.16      142.58      142.27      146.97      151.41                4.50
           40        3000     100      145.79      149.95      149.95      152.25      164.75                6.40
           40        4000     100      123.90      130.93      128.00      145.92      169.11               10.00
           40        5000     100      131.98      166.68      136.52      140.22     3107.55               11.72
           40        6000     100      138.08      142.45      142.01      145.22      170.39               13.52
           40        7000     100      143.73      147.25      146.85      150.89      154.24               15.25
           40        8000     100      167.03      182.41      180.80      193.97      218.08               14.16
           40        9000     100      175.93      188.28      187.31      198.56      211.95               15.38
           40       10000     100      181.34      226.22      195.74      210.25     3117.44               16.35
           40       11000     100      195.87      209.69      208.59      222.50      246.23               16.88
           40       12000     100      200.15      213.77      211.09      227.07      257.64               18.19
           40       13000     100      207.31      280.70      221.10      239.55     3130.09               18.82
           40       14000     100      208.81      225.83      223.60      242.88      259.38               20.04
           40       15000     100      217.27      230.72      229.59      241.47      255.10               20.91
           40       20000     100      223.90      280.44      251.63      273.79     2962.61               25.43
           40       25000     100      248.94      315.88      283.81      311.18     3388.56               28.19
           40       30000     100      268.56      334.05      296.60      332.08     3519.47               32.37
           40       35000     100      303.99      431.95      331.38      379.39     3496.79               33.80
           40       40000     100      346.29      368.36      364.01      394.04      452.25               35.16
           40       45000     100      441.49      475.43      475.40      498.66      528.83               30.29
           40       50000     100      498.87      590.18      530.85      561.23     3440.39               30.14
           40       55000     100      542.49      606.23      573.35      598.61     3576.16               30.70
           40       60000     100      530.61      611.25      577.52      603.97     3832.81               33.25

           60        1000     100      189.79      718.67      196.28     1785.26     1850.91                2.45
           60        2000     100      205.05      299.79      211.75      227.62     4399.04                4.53
           60        3000     100      216.65      224.44      222.43      232.76      256.64                6.47
           60        4000     100      182.63      194.65      187.85      225.68      235.44               10.22
           60        5000     100      192.87      199.28      198.19      202.39      250.27               12.11
           60        6000     100      202.84      239.15      208.63      217.78     3096.30               13.80
           60        7000     100      211.55      216.18      215.11      219.63      263.51               15.62
           60        8000     100      250.41      265.40      265.36      274.21      295.87               14.47
           60        9000     100      258.36      347.18      276.43      289.82     4496.22               15.63
           60       10000     100      270.19      316.80      286.53      305.09     3221.53               16.75
           60       11000     100      292.72      369.33      307.53      323.86     3431.07               17.17
           60       12000     100      304.88      375.61      318.53      336.60     3146.75               18.08
           60       13000     100      308.33      670.41      325.30      341.67    34653.04               19.18
           60       14000     100      313.91      336.56      334.34      352.64      375.49               20.10
           60       15000     100      327.84      419.86      343.84      364.80     4642.20               20.94
           60       20000     100      419.39      472.73      442.72      467.03     3298.12               21.68
           60       25000     100      528.69      623.46      560.14      592.09     3807.67               21.42
           60       30000     100      634.89      784.85      664.24      704.57     3660.40               21.68
           60       35000     100      736.80      780.98      777.38      815.74      849.12               21.61
           60       40000     100      831.80      961.01      893.54      942.54     3798.99               21.49
           60       45000     100      969.90     1102.53     1041.71     1096.98     4027.59               20.74
           60       50000     100     1069.31     1264.43     1152.19     1215.44     4091.62               20.83
           60       55000     100     1181.55     1285.98     1262.20     1311.89     4005.07               20.92
           60       60000     100     1263.08     1419.31     1329.57     1380.16     4343.99               21.66

           80        1000     100      254.05      938.56      263.06     1852.68     4362.00                2.43
           80        2000     100      274.33      369.55      281.12      307.40     3163.24                4.55
           80        3000     100      290.95      325.06      296.37      305.36     3052.75                6.48
           80        4000     100      242.77      285.58      248.24      297.22     3051.72               10.31
           80        5000     100      257.85      293.82      261.94      270.63     3182.78               12.22
           80        6000     100      268.13      276.75      274.47      282.42      329.96               13.99
           80        7000     100      286.97      355.45      297.66      306.88     3377.42               15.05
           80        8000     100      337.74      381.24      354.43      364.36     3122.50               14.45
           80        9000     100      369.15      384.40      383.79      398.35      415.26               15.01
           80       10000     100      406.47      449.87      421.50      432.40     3164.79               15.18
           80       11000     100      444.56      546.98      460.96      472.49     3368.96               15.27
           80       12000     100      485.03      501.90      501.75      512.92      524.10               15.31
           80       13000     100      519.77      599.13      542.40      555.59     3500.76               15.34
           80       14000     100      565.27      695.99      582.68      596.98     3676.73               15.38
           80       15000     100      599.69      675.87      617.76      630.72     3719.94               15.54
           80       20000     100      786.60      880.70      825.31      846.14     3592.10               15.51
           80       25000     100     1002.57     1039.39     1036.02     1068.90     1111.79               15.44
           80       30000     100     1193.06     1377.41     1241.58     1280.77     4076.57               15.46
           80       35000     100     1399.69     1554.18     1452.32     1487.49     4216.50               15.42
           80       40000     100     1597.48     1798.12     1648.13     1717.75     4486.66               15.53
           80       45000     100     1787.13     2073.66     1893.11     1954.37     4769.46               15.21
           80       50000     100     1983.82     2174.49     2065.62     2109.94     4609.52               15.49
           80       55000     100     2180.90     2312.06     2234.42     2293.42     4814.25               15.75
           80       60000     100     2374.14     2585.53     2444.25     2519.48     5016.15               15.71

          100        1000     100      326.70     1191.86     1831.06     1912.53     4362.49                0.44
          100        2000     100      354.28      424.04      361.57      393.49     3250.00                4.43
          100        3000     100      373.10      381.80      380.14      392.05      407.37                6.31
          100        4000     100      308.53      411.73      314.46      377.46     3357.34               10.18
          100        5000     100      324.59      412.15      333.09      369.72     3158.21               12.01
          100        6000     100      350.76      398.01      365.97      376.91     3539.92               13.12
          100        7000     100      407.78      457.26      429.54      437.69     3262.55               13.04
          100        8000     100      472.01      579.07      496.50      511.97     3333.95               12.89
          100        9000     100      535.12      557.01      556.58      573.19      590.04               12.94
          100       10000     100      594.60      760.30      619.88      641.12     6333.39               12.91
          100       11000     100      653.21      711.14      678.07      698.91     3896.48               12.98
          100       12000     100      695.60      789.26      738.32      759.66     3287.45               13.00
          100       13000     100      757.25      872.92      795.28      820.26     3443.51               13.08
          100       14000     100      824.67      900.18      864.07      898.57     3492.34               12.96
          100       15000     100      864.24     1040.83      921.83      968.17     3571.99               13.02
          100       20000     100     1200.40     1390.80     1267.91     1315.39     3937.81               12.62
          100       25000     100     1472.23     1665.98     1578.65     1627.24     4033.37               12.67
          100       30000     100     1759.73     2074.88     1883.08     1952.05     4747.77               12.75
          100       35000     100     2057.22     2314.57     2173.94     2293.25     4804.90               12.88
          100       40000     100     2361.47     2537.27     2464.48     2551.50     4750.82               12.98
          100       45000     100     2623.64     2947.31     2767.88     3120.16     5130.47               13.01
          100       50000     100     2933.88     3165.49     3052.96     3163.48     5659.56               13.10
          100       55000     100     3207.88     3562.92     3347.92     4640.77     6269.55               13.14
          100       60000     100     3539.15     3787.82     3642.84     3726.45     8112.84               13.18

          120        1000     100      394.71     1108.69      409.74     1991.29     4724.32                2.34
          120        2000     100      424.36      517.66      430.87      438.33     3355.83                4.46
          120        3000     100      449.79      483.78      455.89      461.12     3181.54                6.32
          120        4000     100      368.52      456.41      375.32      407.72     4858.17               10.23
          120        5000     100      389.09      503.61      394.68      404.43     5323.02               12.16
          120        6000     100      405.92      412.87      411.79      419.24      428.11               13.99
          120        7000     100      443.24      485.27      454.22      469.42     3279.43               14.79
          120        8000     100      519.45      653.70      537.91      555.96     6046.96               14.28
          120        9000     100      575.96      605.51      605.72      623.17      639.47               14.26
          120       10000     100      644.63      797.67      673.31      692.80     3367.72               14.26
          120       11000     100      713.10      842.01      741.18      761.43     5724.83               14.25
          120       12000     100      775.31      903.51      795.59      816.43     3524.58               14.48
          120       13000     100      828.39      964.44      852.23      873.95     6563.39               14.64
          120       14000     100      883.19      915.79      910.68      935.50     1186.78               14.76
          120       15000     100      939.38     1093.11      977.93     1007.34     3864.76               14.72
          120       20000     100     1271.91     1369.46     1314.04     1361.42     3908.22               14.61
          120       25000     100     1561.95     1889.47     1662.90     1734.86     6644.67               14.43
          120       30000     100     1925.21     2307.39     2000.32     4016.21     6924.18               14.40
          120       35000     100     2238.25     2555.92     2333.65     4232.39     5097.51               14.40
          120       40000     100     2573.41     2956.32     2688.45     4464.88     7251.22               14.28
          120       45000     100     2948.74     3259.42     3068.48     3172.82     7836.67               14.08
          120       50000     100     3291.37     3806.14     3397.89     5066.93    18657.68               14.13
          120       55000     100     3584.15     3998.97     3734.20     5109.74     7100.38               14.14
          120       60000     100     3850.34     4166.71     3984.83     4483.84     7066.94               14.45

          140        1000     100      460.19      860.14      481.11     1984.83     4316.21                2.33
          140        2000     100      496.71      561.06      504.46      516.21     3407.47                4.44
          140        3000     100      524.99      589.89      534.06      543.80     3345.86                6.29
          140        4000     100      431.44      443.05      437.12      455.28      524.78               10.25
          140        5000     100      454.90      489.95      460.44      468.56     3301.78               12.16
          140        6000     100      473.51      628.86      482.63      516.31     3566.99               13.92
          140        7000     100      504.46      541.64      513.57      520.37     3266.37               15.27
          140        8000     100      600.62      702.91      614.13      634.04     3790.97               14.59
          140        9000     100      640.53      668.33      668.16      687.65      700.61               15.09
          140       10000     100      722.81      751.39      748.44      770.64      781.58               14.96
          140       11000     100      793.80      861.84      831.71      857.35     3618.42               14.81
          140       12000     100      868.29      914.69      912.75      950.65      975.46               14.72
          140       13000     100      942.51     1088.02      998.26     1035.31     3863.70               14.59
          140       14000     100     1028.70     1180.97     1093.90     1136.80     4095.39               14.33
          140       15000     100     1106.11     1384.24     1178.03     1237.61     3940.93               14.26
          140       20000     100     1527.43     1749.79     1611.27     1670.27     4656.56               13.90
          140       25000     100     1935.52     2162.19     2044.14     2106.26     5082.83               13.70
          140       30000     100     2345.03     2581.88     2452.33     2513.03     4993.63               13.70
          140       35000     100     2744.69     3052.44     2870.46     3013.01     6408.99               13.66
          140       40000     100     3159.09     3409.34     3288.27     3390.41     5859.83               13.62
          140       45000     100     3510.73     4025.85     3655.40     5740.97     7864.11               13.79
          140       50000     100     3898.77     4367.85     4085.00     5612.96     8146.44               13.71
          140       55000     100     4297.16     4695.31     4448.81     5947.77     7178.19               13.85
          140       60000     100     4670.32     5189.78     4855.71     6492.52     9966.70               13.84

          160        1000     100      528.62      814.17      540.00     2042.01     4019.95                2.37
          160        2000     100      568.88      712.47      578.53      588.57     3524.48                4.43
          160        3000     100      603.72      670.58      614.48      640.77     3323.55                6.25
          160        4000     100      494.03      568.87      501.27      585.55     3531.17               10.21
          160        5000     100      521.33      686.39      536.71      577.85     5840.32               11.92
          160        6000     100      613.60      757.73      630.03      645.59     5415.06               12.19
          160        7000     100      711.19      910.72      744.83      765.25     3743.55               12.03
          160        8000     100      837.98      955.26      867.73      893.30     3906.87               11.80
          160        9000     100      932.01     1029.75      975.02     1000.79     3696.15               11.82
          160       10000     100     1029.43     1203.81     1074.96     1108.19     3927.17               11.91
          160       11000     100     1136.13     1345.87     1191.43     1245.84     4183.66               11.82
          160       12000     100     1232.35     1434.88     1294.57     1352.92     3956.87               11.86
          160       13000     100     1325.31     1556.71     1391.45     1454.83     4175.47               11.96
          160       14000     100     1416.06     1765.89     1505.98     3465.96     4959.13               11.90
          160       15000     100     1538.52     1809.90     1604.06     1725.06     4384.25               11.97
          160       20000     100     2003.19     2262.40     2109.12     2182.68     4705.67               12.14
          160       25000     100     2501.06     2933.36     2640.46     4363.31     6969.64               12.12
          160       30000     100     2929.91     3407.69     3137.32     4735.77     6097.31               12.24
          160       35000     100     3510.22     4008.42     3686.38     5736.87     6632.09               12.15
          160       40000     100     4019.73     4498.80     4197.62     6095.02     7382.03               12.20
          160       45000     100     4666.94     5185.38     4923.48     5974.17     9217.26               11.70
          160       50000     100     5215.12     5707.96     5465.17     7082.66     9782.27               11.71
          160       55000     100     5764.19     6173.19     6006.47     6998.31     8848.58               11.72
          160       60000     100     6191.35     6641.92     6436.02     7083.64    10015.85               11.93

          180        1000     100      600.29      777.36      610.31     2058.59     2158.19                2.36
          180        2000     100      649.87      782.62      657.21      698.17     3422.22                4.38
          180        3000     100      687.51      904.02      710.51      822.67     5381.61                6.08
          180        4000     100      558.21      663.08      567.41      637.97     3602.66               10.15
          180        5000     100      604.53      681.75      622.10      639.87     3497.81               11.57
          180        6000     100      737.84      896.68      760.02      780.09     5664.66               11.37
          180        7000     100      864.08     1075.99      899.98      934.08     3604.56               11.20
          180        8000     100     1013.03     1257.47     1052.68     1096.45     4130.26               10.94
          180        9000     100     1135.30     1417.03     1170.58     1213.09     5067.12               11.07
          180       10000     100     1234.45     1557.89     1277.46     3631.37     5693.48               11.27
          180       11000     100     1344.82     1679.27     1402.58     3615.06     5551.20               11.29
          180       12000     100     1464.69     1841.46     1536.90     3699.64     5961.88               11.24
          180       13000     100     1576.08     1881.63     1658.87     3401.74     4181.61               11.28
          180       14000     100     1720.84     1993.18     1799.53     1892.82     4668.35               11.20
          180       15000     100     1826.78     2017.19     1919.37     1986.59     4875.49               11.25
          180       20000     100     2358.80     2840.00     2508.80     4466.83     5377.54               11.48
          180       25000     100     2982.24     3262.31     3122.68     3282.97     6158.45               11.53
          180       30000     100     3588.28     3934.41     3739.08     4202.51     8256.48               11.55
          180       35000     100     4160.23     4559.66     4362.10     5292.77     8189.64               11.55
          180       40000     100     4744.11     5234.90     4976.83     6852.14     8140.82               11.57
          180       45000     100     5593.93     6081.57     5845.49     7265.34    10086.61               11.09
          180       50000     100     6289.65     6695.95     6548.52     7455.98     9241.75               10.99
          180       55000     100     6938.77     7317.67     7189.07     7645.00     9768.87               11.02
          180       60000     100     7408.46     8128.94     7707.27     8493.04    35042.57               11.21


-----------------------------------------------------------------------------------------------------------------
After "export PSM2_RCVTHREAD=0", we get much better performance.

With 80*2 nodes, we get ~56Gbps per-machine bi-directional BW for messages >= 25KB.

#       nodes     msg (B)     ops         min         avg         p50         p90         p99   Throughput (Gbps)
#--------------------------------------------------------------------------------------------
          160       15000     100      881.80     1004.20      925.93     1038.08     3800.16               20.74
          160       20000     100      968.65     1212.84     1015.81     1273.80     5277.76               25.20
          160       25000     100     1066.38     1563.73     1108.52     1216.73    33738.75               28.87
          160       30000     100     1219.14     1469.25     1345.59     1446.34     4349.15               28.54
          160       35000     100     1512.07     1816.42     1609.66     1845.80     5456.80               27.83
          160       40000     100     1730.89     2101.32     1856.09     2490.72     4742.91               27.58

With 80*4 nodes, we also get ~56Gbps per-machine bi-directional BW for messages >= 15KB.

#       nodes     msg (B)     ops         min         avg         p50         p90         p99   Throughput (Gbps)
#--------------------------------------------------------------------------------------------
          320       15000     100     2450.82     2917.46     2644.76     4882.55     6550.39               14.52
          320       20000     100     3336.48     3792.50     3560.66     5268.42     6064.69               14.38
          320       25000     100     4192.95     4692.75     4482.26     5839.43     6805.35               14.28
          320       30000     100     5132.24     5518.96     5313.68     6458.12     7837.33               14.45
          320       35000     100     5910.62     6266.37     6167.50     6484.37     9394.76               14.53
          320       40000     100     6660.33     7782.48     7072.62     8291.56    57952.09               14.48

With 20*2 nodes, we are still limited by software overhead for messages < 16KB (SMDA threshold).

#       nodes     msg (B)     ops         min         avg         p50         p90         p99   Throughput (Gbps)
#--------------------------------------------------------------------------------------------
           40        1000     100      120.67      532.86      125.20     1732.51     3897.65                2.56
           40        4000     100      122.91      131.97      127.14      147.91      161.15               10.07
           40        8000     100      166.13      207.68      179.09      188.73     3015.12               14.29
           40       10000     100      179.60      193.32      192.52      202.88      214.20               16.62
           40       12000     100      189.08      207.38      205.97      219.97      236.35               18.64
           40       14000     100      205.48      221.13      220.25      232.02      244.14               20.34

And this doesn't degrade with larger cluster size such as 40*2 nodes.

#       nodes     msg (B)     ops         min         avg         p50         p90         p99   Throughput (Gbps)
#--------------------------------------------------------------------------------------------
           80        1000     100      241.90      831.83      251.58     1835.68     3426.99                2.54
           80        4000     100      239.28      316.36      250.62      294.93     3316.39               10.21
           80        8000     100      328.80      348.81      347.19      360.43      395.90               14.75
           80       10000     100      352.21      403.75      374.12      388.23     3241.50               17.11
           80       12000     100      387.23      404.52      402.92      416.08      451.04               19.06
           80       14000     100      412.95      488.53      430.81      447.60     3303.44               20.80

With 40*4 nodes, we continue to increase the per-machine throughput (except for the noisy 1KB case).
For messages < 10KB, we are still limited by software overhead; however, for larger messages, it is
less clear: the 15.7*4 = 62.8Gbps for 14KB is pretty close to (slightly better because only 40 machines?)
the 56Gbps achieved with 40KB messages using SDMA (i.e., we might be hitting the same unknown bottleneck).

#       nodes     msg (B)     ops         min         avg         p50         p90         p99   Throughput (Gbps)
#--------------------------------------------------------------------------------------------
          160        1000     200      503.09      559.32      523.89      598.43     1806.05                2.44
          160        4000     200      539.00      689.48      555.07      633.61     3215.40                9.22
          160        8000     200      786.66      872.55      812.53      833.03     3802.48               12.60
          160       10000     200      899.32      982.85      919.88      938.05     3801.86               13.91
          160       12000     200     1008.49     1086.94     1025.94     1047.70     4204.22               14.97
          160       14000     200     1120.92     1225.78     1141.29     1162.24     4162.32               15.70

====================================
scratch space:

20*4
#       nodes     msg (B)     ops         min         avg         p50         p90         p99   Throughput (Gbps)
#--------------------------------------------------------------------------------------------
           80       16000     100      626.46      740.80      644.70      678.34     3890.14               15.88
